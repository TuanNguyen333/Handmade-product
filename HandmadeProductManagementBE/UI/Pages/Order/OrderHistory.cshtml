@page
@model Order.OrderHistoryModel
@{
    ViewData["Title"] = "Order History";
}
<div class="mx-auto max-w-full">
    <div class="mb-6 text-center">
        <h1 class="ml-4 text-left text-2xl font-bold text-black">Order History</h1>
    </div>

    <div class="mb-4 flex w-full flex-wrap justify-center gap-2">
        <a href="?filter=All"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "All" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            All Orders
        </a>
        <a href="?filter=Pending"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "Pending" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            Pending
        </a>
        <a href="?filter=AwaitingPayment"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "AwaitingPayment" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            Awaiting Payment
        </a>
        <a href="?filter=Processing"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "Processing" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            Processing
        </a>
        <a href="?filter=Delivering"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "Delivering" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            Delivering
        </a>
        <a href="?filter=Shipped"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "Shipped" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            Shipped
        </a>
        <a href="?filter=Canceled"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "Canceled" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            Canceled
        </a>
        <a href="?filter=Refunded"
           class="flex-grow rounded-lg border border-blue-500 p-2 text-center text-lg font-bold
@(Model.CurrentFilter == "Refunded" ? "bg-blue-500 text-white" : "bg-white text-black hover:bg-blue-100")">
            Refunded
        </a>
    </div>

    @if (Model.Orders == null || !Model.Orders.Any())
    {
        <p class="text-black">You don't have any orders yet</p>
    }
    else
    {
        <div class="relative flex h-full w-full flex-col rounded-lg bg-white bg-clip-border text-gray-700 shadow-md">
            <div class="overflow-x-auto">
                <table class="w-full table-auto text-left">
                    <thead>
                        <tr class="border-b border-slate-300 bg-slate-50">
                            <th class="w-1/12 whitespace-nowrap p-6 text-lg font-bold leading-none text-black">No</th>
                            <th class="w-1/5 whitespace-nowrap p-6 text-lg font-bold leading-none text-black">Name</th>
                            <th class="w-[11ch] max-w-[11ch] whitespace-nowrap p-6 text-lg font-bold leading-none text-black">Phone</th>
                            <th class="w-[11ch] max-w-[11ch] whitespace-nowrap p-6 text-lg font-bold leading-none text-black">Order Date</th>
                            <th class="whitespace-nowrap p-6 text-lg font-bold leading-none text-black">Total Price</th>
                            <th class="w-1/6 whitespace-nowrap p-6 text-lg font-bold leading-none text-black">Status</th>
                            <th class="w-1/6 whitespace-nowrap p-6 text-lg font-bold leading-none text-black">Address</th>
                            <th class="w-1/5 whitespace-nowrap p-6 text-lg font-bold leading-none text-black">Note</th>
                            <th class="w-[8ch] max-w-[8ch] whitespace-nowrap p-6 text-lg font-bold leading-none text-black"></th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            var index = 1;
                        }
                        @foreach (var order in Model.Orders)
                        {
                            <tr class="cursor-pointer hover:bg-slate-50"
                                onclick="location.href='@Url.Page("/Order/StatusTracking", new { orderId = order.Id })'">
                                <td class="border-b border-slate-200 p-6 text-lg">@index</td>
                                <td class="border-b border-slate-200 p-6 text-lg">@order.CustomerName</td>
                                <td class="border-b border-slate-200 p-6 text-lg">@order.Phone</td>
                                <td class="border-b border-slate-200 p-6 text-lg">@order.OrderDate.ToString("dd/MM/yyyy")</td>
                                <td class="border-b border-slate-200 p-6 text-lg">@order.TotalPrice.ToString("C")</td>
                                <td class="border-b border-slate-200 p-6 text-lg">@order.Status</td>
                                <td class="border-b border-slate-200 p-6 text-lg">@order.Address</td>
                                <td class="border-b border-slate-200 p-6 text-lg">@order.Note</td>
                                <td class="border-b border-slate-200 p-6 text-lg">
                                    <a href='@Url.Page("/Order/OrderDetail", new { orderId = order.Id })'
                                       class="text-blue-600 hover:underline"
                                       onclick="(e) => e.stopPropagation()">View Detail</a>
                                </td>
                            </tr>
                            index++;
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>
